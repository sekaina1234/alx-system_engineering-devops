import subprocess

# Update package list and install nginx
subprocess.run(['sudo', 'apt', 'update'])
subprocess.run(['sudo', 'apt', 'install', 'nginx', '-y'])

# Allow incoming traffic on ports 22 and 80
subprocess.run(['sudo', 'ufw', 'allow', '22'])
subprocess.run(['sudo', 'ufw', 'allow', '80'])

# Enable the firewall and display its status
subprocess.run(['sudo', 'ufw', '--force', 'enable'])
subprocess.run(['sudo', 'ufw', 'status'])

# Check the status of the nginx service
subprocess.run(['systemctl', 'status', 'nginx'])

# Create a simple "Hello World!" HTML file
with open('/var/www/html/index.nginx-debian.html', 'w') as index_file:
    index_file.write('Hello World!')

# Restart the nginx service
subprocess.run(['sudo', 'service', 'nginx', 'restart'])
